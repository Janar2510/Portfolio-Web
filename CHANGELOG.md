# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- Activities & Follow-ups system with comprehensive activity logging
- FollowUpReminders component for managing follow-up reminders
- NotificationsPanel component for centralized notification display
- Activities page at `/crm/activities` route with tabbed interface
- Enhanced ActivityTimeline with complete/incomplete toggles
- Follow-up notifications edge function
- Activity and follow-up status organization (overdue, today, tomorrow, completed)
- Priority-based notification sorting
- Pipeline board view with drag-and-drop deal management
- PipelineBoard component with stage and deal drag-and-drop
- DealCard component with value and probability display
- PipelineStage component with deal statistics
- DealDetailModal for viewing and editing deals
- StageCustomization component for managing pipeline stages
- Pipeline page at `/crm/pipeline` route
- Deal creation and management
- Stage reordering and customization
- Automatic deal close date when moved to won stage
- Contact management UI with list, filtering, and search
- Contact detail page with activity timeline
- Company management UI with list and contact association
- ActivityTimeline component for CRM activities
- ContactList component with advanced filtering (search, company, tags)
- CompanyList component with contact counts
- CRM routes: `/crm/contacts` and `/crm/companies`
- Contact detail route: `/crm/contacts/[id]`
- Badge UI component
- CRM data layer migration complete
- All CRM tables (companies, contacts, pipeline_stages, deals, crm_activities, follow_ups) migrated
- Comprehensive RLS policies (24 policies total)
- Database triggers for automatic data updates
- Performance indexes for optimized queries
- Calendar integration with month/week/day views
- CalendarView component with multiple view modes
- iCal feed generation API
- Due date notifications edge function for task reminders
- Calendar page at `/projects/calendar` route
- iCal export functionality for external calendar applications
- Task display in calendar with priority color coding
- Kanban board UI with drag-and-drop functionality
- ProjectList component for managing projects
- KanbanBoard component with column and task drag-and-drop
- TaskCard component with priority and due date indicators
- TaskDetailModal with subtasks and comments management
- Task detail editing (title, description, priority, due date)
- Subtasks/checklist with completion tracking
- Comments system with edit/delete functionality
- Project creation with default columns (To Do, In Progress, Done)
- Column reordering via drag-and-drop
- Task movement between columns via drag-and-drop
- Task reordering within columns via drag-and-drop
- Projects page at `/projects` route
- Initial project structure and architecture
- Monorepo setup with Turbo
- Next.js 14 application scaffold with App Router
- TypeScript configuration across all packages
- i18n implementation with next-intl (English and Estonian)
- Supabase client setup (browser, server, middleware)
- Service layer structure (Portfolio, Projects, CRM, Email)
- Shared packages (@portfolio/shared, @portfolio/database)
- Documentation (architecture.md, api-contracts.md, ai-rules.md)
- Directory structure for apps, packages, and Supabase functions
- Tailwind CSS with custom properties and gradient border animations
- Basic routing structure with locale support
- Protected admin routes with authentication
- Dashboard page with gradient border cards
- Environment variable templates
- Database migration for profiles and user_settings tables
- RLS policies for multi-tenant security
- Automatic profile creation trigger on user signup
- Profile service for managing user profiles and settings
- Portfolio module database migration (sites, pages, blocks, styles, templates)
- Comprehensive RLS policies for portfolio module (public read access for published content)
- Portfolio service with full CRUD operations for sites, pages, blocks, and styles
- Template system with apply functionality
- Block reordering support
- Project management module database migration (projects, columns, tasks, subtasks, comments, attachments)
- RLS policies for project management module
- Project service with full CRUD operations for projects, columns, tasks, subtasks, comments, and attachments
- Kanban board support with column and task reordering
- Automatic task completion when moved to done column
- Default column creation on project creation
- CRM module database migration (companies, contacts, pipeline stages, deals, activities, follow-ups)
- RLS policies for CRM module
- CRM service with full CRUD operations for all CRM entities
- Pipeline management with customizable stages
- Activity timeline tracking
- Follow-up reminder system
- Automatic contact last_contacted_at updates
- Automatic deal close date when moved to won stage
- Email integration module database migration (accounts, emails, templates)
- RLS policies for email module
- Email service with full CRUD operations for accounts, emails, and templates
- Email account management with encrypted credentials
- Email synchronization support with sync state tracking
- Email thread/conversation grouping
- Email linking to contacts and deals
- Automatic CRM activity creation from emails
- Email template system with variable substitution
- Analytics and A/B testing module database migration (events, experiments, variants, daily rollups)
- RLS policies for analytics module (public can insert events for published sites)
- Analytics service with event tracking and A/B testing support
- Event tracking with UTM parameters, device, browser, and country data
- A/B experiment management with variant tracking
- Automatic conversion tracking for A/B tests
- Daily analytics aggregation support
- Site analytics summary with key metrics
- Standardized RLS policy patterns across all migrations
- Updated portfolio_sites policy to combine public/owner access in single policy
- Updated analytics_events policy to allow anonymous inserts (WITH CHECK TRUE)
- Created RLS patterns documentation for consistency
- Added high-priority database indexes for common queries
- Optimized combined indexes for analytics_events, emails, and portfolio_blocks
- Comprehensive API contracts documentation with all endpoints
- API versioning with `/api/v1/` prefix
- Consistent response envelope format across all endpoints
- Detailed API request/response examples document
- JSON examples for common endpoints (tasks, contacts, deals, emails, analytics)
- Error response examples with different error scenarios
- Realtime subscriptions documentation with Supabase Realtime examples
- Reusable React hook for managing realtime subscriptions (useRealtimeSubscription)
- Channel examples for tasks, deals, CRM activities, and emails
- Best practices and performance considerations for realtime
- Prettier configuration for code formatting
- ESLint integration with Prettier
- Shadcn UI setup with components.json
- Tailwind CSS configuration with Shadcn UI theme
- Button component from Shadcn UI
- EditorConfig for consistent code style
- Setup documentation and development guides
- MCP server setup for Supabase integration
- MCP configuration files and setup script
- Documentation for Supabase MCP server (hosted and self-hosted options)
- Supabase project configuration (pcltfprbgwqmymmveloj)
- Setup scripts for Supabase project initialization
- Migration verification script
- Quick start guide with step-by-step instructions
- Auth provider configuration documentation
- Supabase project initialized and configured
- All migrations applied successfully
